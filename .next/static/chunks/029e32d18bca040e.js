(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,62319,e=>{"use strict";var s=e.i(43476),n=e.i(71645),a=e.i(53210);async function t({id:e,email:s}){if(!a.supabaseAdmin)return console.warn("supabaseAdmin not configured. Set SUPABASE_SERVICE_ROLE_KEY in .env.local"),null;let{data:n,error:t}=await a.supabaseAdmin.from("profiles").select("id").eq("id",e).maybeSingle();if(t)return console.error("ensureProfile read error:",t.message),null;if(!n){if(!a.supabaseAdmin)return console.warn("supabaseAdmin not configured. Set SUPABASE_SERVICE_ROLE_KEY in .env.local"),null;let{data:n,error:t}=await a.supabaseAdmin.from("profiles").insert({id:e,email:s??null,status:"inactive",plan:"free"}).select().single();return t?(console.error("ensureProfile insert error:",t.message),null):n}return n}function r({value:e,onChange:a,placeholder:t="Password",className:r=""}){let[i,l]=(0,n.useState)(!1),o=(0,n.useRef)(null);return(0,n.useEffect)(()=>()=>{o.current&&clearTimeout(o.current)},[]),(0,s.jsxs)("div",{className:`relative ${r}`,children:[(0,s.jsx)("input",{type:i?"text":"password",value:e,onChange:e=>a(e.target.value),placeholder:t,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,s.jsx)("button",{type:"button",onClick:()=>{l(!0),o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{l(!1)},2e3)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none","aria-label":i?"Hide password":"Show password",children:i?(0,s.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M12 5C7 5 2.73 8.11 1 12.46c1.73 4.35 6 7.54 11 7.54s9.27-3.19 11-7.54C21.27 8.11 17 5 12 5zm0 12c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})}):(0,s.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.81-2.89 3.69-4.75-1.73-4.35-6-7.54-11-7.54-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 001 11.5c1.73 4.35 6 7.54 11 7.54 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zm7.5.89c.3-.05.59-.08.9-.08 2.76 0 5 2.24 5 5 0 .31-.03.59-.08.89l-5.82-5.81z"})})})]})}function i({isOpen:e,onClose:a,onSubmit:t,mode:i}){let[l,o]=(0,n.useState)(""),[u,c]=(0,n.useState)(""),[d,m]=(0,n.useState)(!1),g=async e=>{if(e.preventDefault(),!l||!u)return void alert("Please fill in all fields");m(!0);try{await t(l,u),o(""),c(""),a()}catch(e){}finally{m(!1)}};return e?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-8 w-full max-w-sm shadow-xl",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-900",children:"signin"===i?"Sign In":"Sign Up"}),(0,s.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,s.jsx)("input",{type:"email",placeholder:"Email",value:l,onChange:e=>o(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:d}),(0,s.jsx)(r,{value:u,onChange:c,placeholder:"Password (min 6 chars)",className:"w-full"}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:a,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition",disabled:d,children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed font-medium transition",disabled:d,children:d?"signin"===i?"Signing In...":"Signing Up...":"signin"===i?"Sign In":"Sign Up"})]})]})]})}):null}function l({session:e}){let[r,l]=(0,n.useState)(!1),[o,u]=(0,n.useState)(!1),c=async(e,s)=>{let{data:n,error:r}=await a.supabase.auth.signInWithPassword({email:e,password:s});if(r)return void alert(r.message);let i=n.user;i&&await t({id:i.id,email:i.email}),alert("Signed in!")},d=async(e,s)=>{let{data:n,error:r}=await a.supabase.auth.signUp({email:e,password:s});if(r)return void alert(r.message);let i=n.user;i&&await t({id:i.id,email:i.email}),alert("Account created! Check your email for confirmation if required.")},m=async()=>{await a.supabase.auth.signOut(),alert("Signed out.")};return e?.user?(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"hidden sm:inline text-sm text-gray-600",children:e.user.email}),(0,s.jsx)("button",{className:"px-3 py-1 rounded border hover:bg-gray-100",onClick:m,children:"Sign Out"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{className:"px-4 py-2 rounded border border-gray-300 text-gray-700 hover:bg-gray-50 font-medium transition",onClick:()=>l(!0),children:"Sign In"}),(0,s.jsx)("button",{className:"px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 font-medium transition",onClick:()=>u(!0),children:"Sign Up"})]}),(0,s.jsx)(i,{isOpen:r,onClose:()=>l(!1),onSubmit:c,mode:"signin"}),(0,s.jsx)(i,{isOpen:o,onClose:()=>u(!1),onSubmit:d,mode:"signup"})]})}function o(){let[e,t]=(0,n.useState)(null);return(0,n.useEffect)(()=>{a.supabase.auth.getSession().then(({data:e})=>t(e.session));let{data:e}=a.supabase.auth.onAuthStateChange((e,s)=>t(s));return()=>e?.subscription?.unsubscribe()},[]),(0,s.jsx)("nav",{className:"w-full border-b bg-white",children:(0,s.jsxs)("div",{className:"mx-auto max-w-6xl px-4 py-3 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"inline-block rounded bg-black text-white px-2 py-1 text-sm font-bold",children:"AI"}),(0,s.jsx)("span",{className:"text-lg font-semibold",children:"Kevin SAAS Practice 1"})]}),(0,s.jsx)("div",{className:"hidden md:flex items-center gap-4"})]}),(0,s.jsx)("div",{className:"flex items-center gap-3",children:(0,s.jsx)(l,{session:e})})]})})}e.s(["default",()=>o],62319)}]);