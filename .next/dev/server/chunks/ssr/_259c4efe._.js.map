{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/ubuntu/Downloads/Saas/components/InputForm.tsx"],"sourcesContent":["// /components/InputForm.tsx\r\n'use client';\r\nimport { useState } from 'react';\r\nimport { supabase } from '@/lib/supabaseClient';\r\n\r\nfunction JsonTable({ data }: { data: any }) {\r\n  const renderValue = (value: any): string => {\r\n    if (typeof value === 'object' && value !== null) {\r\n      return JSON.stringify(value, null, 2);\r\n    }\r\n    return String(value);\r\n  };\r\n\r\n  const entries = Object.entries(data).map(([key, value]) => ({\r\n    key,\r\n    value: renderValue(value)\r\n  }));\r\n\r\n  return (\r\n    <div className=\"overflow-x-auto mt-4\">\r\n      <table className=\"w-full border-collapse border border-gray-300\">\r\n        <thead>\r\n        <tr className=\"bg-blue-50\">\r\n            <th className=\"border border-gray-300 px-4 py-2 text-left font-semibold\">Key</th>\r\n            <th className=\"border border-gray-300 px-4 py-2 text-left font-semibold\">Value</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {entries.map((entry, idx) => (\r\n            <tr key={idx} className={idx % 2 === 0 ? 'bg-white' : 'bg-gray-50'}>\r\n              <td className=\"border border-gray-300 px-4 py-2 font-medium text-gray-700\">{entry.key}</td>\r\n              <td className=\"border border-gray-300 px-4 py-2 text-gray-600 whitespace-pre-wrap font-mono text-sm\">{entry.value}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function InputForm({ disabled }: { disabled?: boolean }) {\r\n  const [originalText, setOriginalText] = useState('');\r\n  const [generatedOutput, setGeneratedOutput] = useState<any>(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Calculate UTF-8 byte length\r\n  const charCount = new TextEncoder().encode(originalText).length;\r\n  const maxChars = 5000;\r\n  const isExceeded = charCount > maxChars;\r\n\r\n  const generate = async () => {\r\n    if (isExceeded) {\r\n      alert('Text exceeds 5000 UTF-8 character limit');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    const { data: session } = await supabase.auth.getSession();\r\n    const userId = session.session?.user.id!;\r\n    const res = await fetch('/api/ai', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ userId, title: 'Analysis', transcript: originalText })\r\n    });\r\n    const json = await res.json();\r\n    setLoading(false);\r\n    if (json.error) {\r\n      alert(json.error);\r\n      setGeneratedOutput(null);\r\n    } else if (json.doc?.output) {\r\n      setGeneratedOutput(json.doc.output);\r\n    } else {\r\n      setGeneratedOutput(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"mt-8 border rounded p-4 bg-white\">\r\n      <textarea \r\n        className=\"textarea w-full h-40 px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500\" \r\n        placeholder=\"Paste your original text here...\" \r\n        value={originalText} \r\n        onChange={e => setOriginalText(e.target.value)} \r\n      />\r\n      <div className={`text-sm mt-2 ${isExceeded ? 'text-red-600 font-semibold' : 'text-gray-600'}`}>\r\n        {charCount} / {maxChars} UTF-8 bytes\r\n      </div>\r\n      \r\n      <div className=\"flex gap-3 mt-4\">\r\n        <button \r\n          className={`px-6 py-2 rounded font-medium transition ${\r\n            disabled || isExceeded\r\n              ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\r\n              : loading\r\n              ? 'bg-blue-500 text-white'\r\n              : 'bg-blue-600 text-white hover:bg-blue-700'\r\n          }`}\r\n          onClick={generate} \r\n          disabled={disabled || loading || isExceeded}\r\n        >\r\n          {loading ? 'Generating...' : 'Generate'}\r\n        </button>\r\n        \r\n        <button\r\n          className=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition\"\r\n          onClick={() => setGeneratedOutput(null)}\r\n        >\r\n          Clear Generated Summary\r\n        </button>\r\n      </div>\r\n\r\n      <h3 className=\"font-semibold mb-2 mt-6\">Generated Summary</h3>\r\n      {generatedOutput && <JsonTable data={generatedOutput} />}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,4BAA4B;;;;;;AAE5B;AACA;AAFA;;;;AAIA,SAAS,UAAU,EAAE,IAAI,EAAiB;IACxC,MAAM,cAAc,CAAC;QACnB,IAAI,OAAO,UAAU,YAAY,UAAU,MAAM;YAC/C,OAAO,KAAK,SAAS,CAAC,OAAO,MAAM;QACrC;QACA,OAAO,OAAO;IAChB;IAEA,MAAM,UAAU,OAAO,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,KAAK,MAAM,GAAK,CAAC;YAC1D;YACA,OAAO,YAAY;QACrB,CAAC;IAED,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAM,WAAU;;8BACf,8OAAC;8BACD,cAAA,8OAAC;wBAAG,WAAU;;0CACV,8OAAC;gCAAG,WAAU;0CAA2D;;;;;;0CACzE,8OAAC;gCAAG,WAAU;0CAA2D;;;;;;;;;;;;;;;;;8BAG7E,8OAAC;8BACE,QAAQ,GAAG,CAAC,CAAC,OAAO,oBACnB,8OAAC;4BAAa,WAAW,MAAM,MAAM,IAAI,aAAa;;8CACpD,8OAAC;oCAAG,WAAU;8CAA8D,MAAM,GAAG;;;;;;8CACrF,8OAAC;oCAAG,WAAU;8CAAwF,MAAM,KAAK;;;;;;;2BAF1G;;;;;;;;;;;;;;;;;;;;;AASrB;AAEe,SAAS,UAAU,EAAE,QAAQ,EAA0B;IACpE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAM;IAC5D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,8BAA8B;IAC9B,MAAM,YAAY,IAAI,cAAc,MAAM,CAAC,cAAc,MAAM;IAC/D,MAAM,WAAW;IACjB,MAAM,aAAa,YAAY;IAE/B,MAAM,WAAW;QACf,IAAI,YAAY;YACd,MAAM;YACN;QACF;QAEA,WAAW;QACX,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,iIAAQ,CAAC,IAAI,CAAC,UAAU;QACxD,MAAM,SAAS,QAAQ,OAAO,EAAE,KAAK;QACrC,MAAM,MAAM,MAAM,MAAM,WAAW;YACjC,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAQ,OAAO;gBAAY,YAAY;YAAa;QAC7E;QACA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,WAAW;QACX,IAAI,KAAK,KAAK,EAAE;YACd,MAAM,KAAK,KAAK;YAChB,mBAAmB;QACrB,OAAO,IAAI,KAAK,GAAG,EAAE,QAAQ;YAC3B,mBAAmB,KAAK,GAAG,CAAC,MAAM;QACpC,OAAO;YACL,mBAAmB;QACrB;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBACC,WAAU;gBACV,aAAY;gBACZ,OAAO;gBACP,UAAU,CAAA,IAAK,gBAAgB,EAAE,MAAM,CAAC,KAAK;;;;;;0BAE/C,8OAAC;gBAAI,WAAW,CAAC,aAAa,EAAE,aAAa,+BAA+B,iBAAiB;;oBAC1F;oBAAU;oBAAI;oBAAS;;;;;;;0BAG1B,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,WAAW,CAAC,yCAAyC,EACnD,YAAY,aACR,iDACA,UACA,2BACA,4CACJ;wBACF,SAAS;wBACT,UAAU,YAAY,WAAW;kCAEhC,UAAU,kBAAkB;;;;;;kCAG/B,8OAAC;wBACC,WAAU;wBACV,SAAS,IAAM,mBAAmB;kCACnC;;;;;;;;;;;;0BAKH,8OAAC;gBAAG,WAAU;0BAA0B;;;;;;YACvC,iCAAmB,8OAAC;gBAAU,MAAM;;;;;;;;;;;;AAG3C"}},
    {"offset": {"line": 224, "column": 0}, "map": {"version":3,"sources":["file:///home/ubuntu/Downloads/Saas/components/ResultCard.tsx"],"sourcesContent":["// /components/ResultCard.tsx\r\n\r\nfunction JsonTable({ data }: { data: any }) {\r\n  const renderValue = (value: any): string => {\r\n    if (typeof value === 'object' && value !== null) {\r\n      return JSON.stringify(value, null, 2);\r\n    }\r\n    return String(value);\r\n  };\r\n\r\n  const entries: { key: string; value: any; isArray?: boolean }[] = [];\r\n\r\n  Object.entries(data).forEach(([key, value]) => {\r\n    // Skip summary key\r\n    if (key === 'summary') return;\r\n\r\n    if (Array.isArray(value)) {\r\n      // For arrays, add each item as a separate row\r\n      value.forEach((item, idx) => {\r\n        entries.push({\r\n          key: idx === 0 ? key : '',\r\n          value: renderValue(item),\r\n          isArray: true\r\n        });\r\n      });\r\n    } else {\r\n      entries.push({\r\n        key,\r\n        value: renderValue(value)\r\n      });\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div className=\"overflow-x-auto mt-4\">\r\n      <table className=\"w-full border-collapse border border-gray-300 text-sm\">\r\n        <tbody>\r\n          {entries.map((entry, idx) => (\r\n            <tr key={idx} className={idx % 2 === 0 ? 'bg-white' : 'bg-gray-50'}>\r\n              <td className=\"border border-gray-300 px-3 py-2 font-medium text-gray-700 whitespace-nowrap align-top\">{entry.key}</td>\r\n              <td className=\"border border-gray-300 px-3 py-2 text-gray-600 whitespace-pre-wrap font-mono text-xs\">{entry.value}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function ResultCard({ doc }: { doc: any }) {\r\n  const o = doc.output || {};\r\n  \r\n  return (\r\n    <div className=\"border rounded p-4 bg-white\">\r\n  {/*    <h4 className=\"font-semibold text-lg mb-4\">{doc.title}</h4> */}\r\n      {typeof o === 'object' && Object.keys(o).length > 0 ? (\r\n        <JsonTable data={o} />\r\n      ) : (\r\n        <p className=\"text-gray-500\">No output available</p>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,6BAA6B;;;;;;;AAE7B,SAAS,UAAU,EAAE,IAAI,EAAiB;IACxC,MAAM,cAAc,CAAC;QACnB,IAAI,OAAO,UAAU,YAAY,UAAU,MAAM;YAC/C,OAAO,KAAK,SAAS,CAAC,OAAO,MAAM;QACrC;QACA,OAAO,OAAO;IAChB;IAEA,MAAM,UAA4D,EAAE;IAEpE,OAAO,OAAO,CAAC,MAAM,OAAO,CAAC,CAAC,CAAC,KAAK,MAAM;QACxC,mBAAmB;QACnB,IAAI,QAAQ,WAAW;QAEvB,IAAI,MAAM,OAAO,CAAC,QAAQ;YACxB,8CAA8C;YAC9C,MAAM,OAAO,CAAC,CAAC,MAAM;gBACnB,QAAQ,IAAI,CAAC;oBACX,KAAK,QAAQ,IAAI,MAAM;oBACvB,OAAO,YAAY;oBACnB,SAAS;gBACX;YACF;QACF,OAAO;YACL,QAAQ,IAAI,CAAC;gBACX;gBACA,OAAO,YAAY;YACrB;QACF;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAM,WAAU;sBACf,cAAA,8OAAC;0BACE,QAAQ,GAAG,CAAC,CAAC,OAAO,oBACnB,8OAAC;wBAAa,WAAW,MAAM,MAAM,IAAI,aAAa;;0CACpD,8OAAC;gCAAG,WAAU;0CAA0F,MAAM,GAAG;;;;;;0CACjH,8OAAC;gCAAG,WAAU;0CAAwF,MAAM,KAAK;;;;;;;uBAF1G;;;;;;;;;;;;;;;;;;;;AASrB;AAEe,SAAS,WAAW,EAAE,GAAG,EAAgB;IACtD,MAAM,IAAI,IAAI,MAAM,IAAI,CAAC;IAEzB,qBACE,8OAAC;QAAI,WAAU;kBAEZ,OAAO,MAAM,YAAY,OAAO,IAAI,CAAC,GAAG,MAAM,GAAG,kBAChD,8OAAC;YAAU,MAAM;;;;;iCAEjB,8OAAC;YAAE,WAAU;sBAAgB;;;;;;;;;;;AAIrC"}},
    {"offset": {"line": 332, "column": 0}, "map": {"version":3,"sources":["file:///home/ubuntu/Downloads/Saas/app/dashboard/page.tsx"],"sourcesContent":["// /app/dashboard/page.tsx\r\n'use client';\r\nimport { useEffect, useState } from 'react';\r\nimport Link from 'next/link';\r\nimport { supabase } from '@/lib/supabaseClient';\r\nimport InputForm from '@/components/InputForm';\r\nimport ResultCard from '@/components/ResultCard';\r\n\r\nexport default function Dashboard() {\r\n  const [session, setSession] = useState<any>(null);\r\n  const [profile, setProfile] = useState<any>(null);\r\n  const [docs, setDocs] = useState<any[]>([]);\r\n\r\n  useEffect(() => {\r\n    supabase.auth.getSession().then(({ data }) => setSession(data.session));\r\n    const { data: sub } = supabase.auth.onAuthStateChange((_e, s) => setSession(s));\r\n    return () => sub?.subscription?.unsubscribe();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      if (!session) return;\r\n      const { data: prof } = await supabase.from('profiles').select('*').eq('id', session.user.id).single();\r\n      setProfile(prof);\r\n      const { data: docs } = await supabase.from('documents').select('*').eq('user_id', session.user.id).order('created_at', { ascending: false });\r\n      setDocs(docs ?? []);\r\n    })();\r\n  }, [session]);\r\n\r\n  if (!session) {\r\n    return (\r\n      <main className=\"p-8\">\r\n        <h2 className=\"text-2xl font-bold mb-4\">Sign in to Dashboard</h2>\r\n        <p className=\"text-gray-600 mb-6\">Please sign in to access your dashboard and create summaries.</p>\r\n      </main>\r\n    );\r\n  }\r\n\r\n  const isActive = profile?.status === 'active';\r\n\r\n  return (\r\n    <main className=\"mx-auto max-w-4xl p-8\">\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <h2 className=\"text-2xl font-bold\">Dashboard</h2>\r\n        <div className=\"flex gap-3\">\r\n          {!isActive && (\r\n            <Link href=\"/#pricing\">\r\n              <button className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition\">\r\n                Upgrade\r\n              </button>\r\n            </Link>\r\n          )}\r\n          <button \r\n            className=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition\"\r\n            onClick={() => supabase.auth.signOut()}\r\n          >\r\n            Sign Out\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <InputForm />\r\n\r\n      <section className=\"mt-8 grid gap-4\">\r\n        {docs.map(d => <ResultCard key={d.id} doc={d} />)}\r\n      </section>\r\n    </main>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,0BAA0B;;;;;;AAE1B;AACA;AACA;AACA;AACA;AALA;;;;;;;AAOe,SAAS;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAM;IAC5C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAM;IAC5C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAQ,EAAE;IAE1C,IAAA,kNAAS,EAAC;QACR,iIAAQ,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,CAAC,EAAE,IAAI,EAAE,GAAK,WAAW,KAAK,OAAO;QACrE,MAAM,EAAE,MAAM,GAAG,EAAE,GAAG,iIAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,IAAI,IAAM,WAAW;QAC5E,OAAO,IAAM,KAAK,cAAc;IAClC,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACR,CAAC;YACC,IAAI,CAAC,SAAS;YACd,MAAM,EAAE,MAAM,IAAI,EAAE,GAAG,MAAM,iIAAQ,CAAC,IAAI,CAAC,YAAY,MAAM,CAAC,KAAK,EAAE,CAAC,MAAM,QAAQ,IAAI,CAAC,EAAE,EAAE,MAAM;YACnG,WAAW;YACX,MAAM,EAAE,MAAM,IAAI,EAAE,GAAG,MAAM,iIAAQ,CAAC,IAAI,CAAC,aAAa,MAAM,CAAC,KAAK,EAAE,CAAC,WAAW,QAAQ,IAAI,CAAC,EAAE,EAAE,KAAK,CAAC,cAAc;gBAAE,WAAW;YAAM;YAC1I,QAAQ,QAAQ,EAAE;QACpB,CAAC;IACH,GAAG;QAAC;KAAQ;IAEZ,IAAI,CAAC,SAAS;QACZ,qBACE,8OAAC;YAAK,WAAU;;8BACd,8OAAC;oBAAG,WAAU;8BAA0B;;;;;;8BACxC,8OAAC;oBAAE,WAAU;8BAAqB;;;;;;;;;;;;IAGxC;IAEA,MAAM,WAAW,SAAS,WAAW;IAErC,qBACE,8OAAC;QAAK,WAAU;;0BACd,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAqB;;;;;;kCACnC,8OAAC;wBAAI,WAAU;;4BACZ,CAAC,0BACA,8OAAC,uKAAI;gCAAC,MAAK;0CACT,cAAA,8OAAC;oCAAO,WAAU;8CAAuF;;;;;;;;;;;0CAK7G,8OAAC;gCACC,WAAU;gCACV,SAAS,IAAM,iIAAQ,CAAC,IAAI,CAAC,OAAO;0CACrC;;;;;;;;;;;;;;;;;;0BAML,8OAAC,mIAAS;;;;;0BAEV,8OAAC;gBAAQ,WAAU;0BAChB,KAAK,GAAG,CAAC,CAAA,kBAAK,8OAAC,oIAAU;wBAAY,KAAK;uBAAX,EAAE,EAAE;;;;;;;;;;;;;;;;AAI5C"}}]
}