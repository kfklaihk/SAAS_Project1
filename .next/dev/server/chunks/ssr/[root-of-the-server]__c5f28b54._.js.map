{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///home/ubuntu/Downloads/Saas/components/Pricing.tsx"],"sourcesContent":["// /components/Pricing.tsx\r\n'use client';\r\nimport { useState } from 'react';\r\nimport { useSearchParams } from 'next/navigation';\r\nimport { supabase } from '@/lib/supabaseClient';\r\n\r\nexport default function Pricing() {\r\n  const [loading, setLoading] = useState(false);\r\n  const searchParams = useSearchParams();\r\n  const userIdParam = searchParams.get('id');\r\n\r\n  const handleUpgrade = async (plan: 'monthly' | 'annual') => {\r\n    setLoading(true);\r\n    try {\r\n      const { data } = await supabase.auth.getSession();\r\n      const session = data.session;\r\n\r\n      if (!session) {\r\n        alert('Please sign in first');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      const userId = session.user.id;\r\n      const email = session.user.email;\r\n\r\n      const res = await fetch('/api/stripe/session', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          plan: plan === 'monthly' ? 'monthly' : 'annual',\r\n          userId,\r\n          email,\r\n        }),\r\n      });\r\n\r\n      const json = await res.json();\r\n      if (json.error) {\r\n        alert(json.error);\r\n      } else if (json.url) {\r\n        window.location.href = json.url;\r\n      }\r\n    } catch (error) {\r\n      console.error('Upgrade error:', error);\r\n      alert('Failed to initiate upgrade. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"grid md:grid-cols-2 gap-6\">\r\n      <div className=\"border-2 border-gray-200 rounded-lg p-8 bg-white hover:border-blue-300 transition\">\r\n        <h3 className=\"text-2xl font-bold text-gray-900\">Starter</h3>\r\n        <p className=\"mt-3 text-4xl font-extrabold text-gray-900\">HKD 78<span className=\"text-lg text-gray-600 font-normal\">/mo</span></p>\r\n        <ul className=\"mt-4 space-y-3 text-gray-700\">\r\n          <li className=\"flex items-start\">\r\n            <span className=\"text-blue-600 font-bold mr-2\">✓</span>\r\n            <span>Up to 50 minutes summarized/mo</span>\r\n          </li>\r\n          <li className=\"flex items-start\">\r\n            <span className=\"text-blue-600 font-bold mr-2\">✓</span>\r\n            <span>5 documents per month</span>\r\n          </li>\r\n          <li className=\"flex items-start\">\r\n            <span className=\"text-blue-600 font-bold mr-2\">✓</span>\r\n            <span>Email support</span>\r\n          </li>\r\n        </ul>\r\n        <button\r\n          onClick={() => handleUpgrade('monthly')}\r\n          disabled={loading}\r\n          className=\"mt-6 w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed font-semibold transition\"\r\n        >\r\n          {loading ? 'Processing...' : 'Upgrade Monthly'}\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"border-2 border-blue-600 rounded-lg p-8 bg-blue-50 relative\">\r\n        <div className=\"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-blue-600 text-white px-4 py-1 rounded-full text-sm font-semibold\">\r\n          Most Popular\r\n        </div>\r\n        <h3 className=\"text-2xl font-bold text-gray-900\">Pro</h3>\r\n        <p className=\"mt-3 text-4xl font-extrabold text-gray-900\">HKD 288<span className=\"text-lg text-gray-600 font-normal\">/mo</span></p>\r\n        <ul className=\"mt-4 space-y-3 text-gray-700\">\r\n          <li className=\"flex items-start\">\r\n            <span className=\"text-blue-600 font-bold mr-2\">✓</span>\r\n            <span>Unlimited summaries</span>\r\n          </li>\r\n          <li className=\"flex items-start\">\r\n            <span className=\"text-blue-600 font-bold mr-2\">✓</span>\r\n            <span>Priority support</span>\r\n          </li>\r\n          <li className=\"flex items-start\">\r\n            <span className=\"text-blue-600 font-bold mr-2\">✓</span>\r\n            <span>Team seats (coming soon)</span>\r\n          </li>\r\n        </ul>\r\n        <button\r\n          onClick={() => handleUpgrade('annual')}\r\n          disabled={loading}\r\n          className=\"mt-6 w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed font-semibold transition\"\r\n        >\r\n          {loading ? 'Processing...' : 'Upgrade Annually'}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,0BAA0B;;;;;;AAE1B;AACA;AACA;AAHA;;;;;AAKe,SAAS;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,eAAe,IAAA,qJAAe;IACpC,MAAM,cAAc,aAAa,GAAG,CAAC;IAErC,MAAM,gBAAgB,OAAO;QAC3B,WAAW;QACX,IAAI;YACF,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,iIAAQ,CAAC,IAAI,CAAC,UAAU;YAC/C,MAAM,UAAU,KAAK,OAAO;YAE5B,IAAI,CAAC,SAAS;gBACZ,MAAM;gBACN,WAAW;gBACX;YACF;YAEA,MAAM,SAAS,QAAQ,IAAI,CAAC,EAAE;YAC9B,MAAM,QAAQ,QAAQ,IAAI,CAAC,KAAK;YAEhC,MAAM,MAAM,MAAM,MAAM,uBAAuB;gBAC7C,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB,MAAM,SAAS,YAAY,YAAY;oBACvC;oBACA;gBACF;YACF;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,IAAI,KAAK,KAAK,EAAE;gBACd,MAAM,KAAK,KAAK;YAClB,OAAO,IAAI,KAAK,GAAG,EAAE;gBACnB,OAAO,QAAQ,CAAC,IAAI,GAAG,KAAK,GAAG;YACjC;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,kBAAkB;YAChC,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAmC;;;;;;kCACjD,8OAAC;wBAAE,WAAU;;4BAA6C;0CAAM,8OAAC;gCAAK,WAAU;0CAAoC;;;;;;;;;;;;kCACpH,8OAAC;wBAAG,WAAU;;0CACZ,8OAAC;gCAAG,WAAU;;kDACZ,8OAAC;wCAAK,WAAU;kDAA+B;;;;;;kDAC/C,8OAAC;kDAAK;;;;;;;;;;;;0CAER,8OAAC;gCAAG,WAAU;;kDACZ,8OAAC;wCAAK,WAAU;kDAA+B;;;;;;kDAC/C,8OAAC;kDAAK;;;;;;;;;;;;0CAER,8OAAC;gCAAG,WAAU;;kDACZ,8OAAC;wCAAK,WAAU;kDAA+B;;;;;;kDAC/C,8OAAC;kDAAK;;;;;;;;;;;;;;;;;;kCAGV,8OAAC;wBACC,SAAS,IAAM,cAAc;wBAC7B,UAAU;wBACV,WAAU;kCAET,UAAU,kBAAkB;;;;;;;;;;;;0BAIjC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCAA0I;;;;;;kCAGzJ,8OAAC;wBAAG,WAAU;kCAAmC;;;;;;kCACjD,8OAAC;wBAAE,WAAU;;4BAA6C;0CAAO,8OAAC;gCAAK,WAAU;0CAAoC;;;;;;;;;;;;kCACrH,8OAAC;wBAAG,WAAU;;0CACZ,8OAAC;gCAAG,WAAU;;kDACZ,8OAAC;wCAAK,WAAU;kDAA+B;;;;;;kDAC/C,8OAAC;kDAAK;;;;;;;;;;;;0CAER,8OAAC;gCAAG,WAAU;;kDACZ,8OAAC;wCAAK,WAAU;kDAA+B;;;;;;kDAC/C,8OAAC;kDAAK;;;;;;;;;;;;0CAER,8OAAC;gCAAG,WAAU;;kDACZ,8OAAC;wCAAK,WAAU;kDAA+B;;;;;;kDAC/C,8OAAC;kDAAK;;;;;;;;;;;;;;;;;;kCAGV,8OAAC;wBACC,SAAS,IAAM,cAAc;wBAC7B,UAAU;wBACV,WAAU;kCAET,UAAU,kBAAkB;;;;;;;;;;;;;;;;;;AAKvC"}}]
}